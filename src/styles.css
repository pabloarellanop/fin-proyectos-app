:root{
  --bg:#f6f7fb;
  --card:#fff;
  --text:#111827;
  --muted:#6b7280;
  --line:#e5e7eb;
  --brand:#1f2a44;
  --soft:#f1f5ff;
}
*{ box-sizing:border-box; }
body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--text); background:var(--bg); }
.container{ max-width:1200px; margin:0 auto; padding:16px; }
.topbar{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
.sectionHeader{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:6px; flex-wrap:wrap; }
.brand{ font-weight:900; color:var(--brand); font-size:18px; }
.tabs{ display:flex; gap:8px; flex-wrap:wrap; }
.tab{ padding:8px 10px; border:1px solid var(--line); background:#fff; border-radius:10px; cursor:pointer; font-weight:700; font-size:13px; }
.tab.active{ background:var(--soft); border-color:#dbe6ff; }
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.card{ background:var(--card); border:1px solid var(--line); border-radius:14px; padding:12px; box-shadow:0 1px 10px rgba(0,0,0,0.04); }
.h2{ margin:0 0 8px 0; font-size:14px; font-weight:900; color:var(--brand); }
.muted{ color:var(--muted); font-size:13px; }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.kpis{ display:flex; gap:10px; flex-wrap:wrap; }
.kpi{ padding:10px; border:1px solid var(--line); border-radius:12px; background:#fafbff; min-width:180px; }
.kpi .label{ font-size:12px; color:var(--muted); }
.kpi .value{ font-size:16px; font-weight:900; margin-top:4px; }
label{ display:flex; flex-direction:column; gap:6px; font-size:12px; color:#374151; }
input,select{ border:1px solid #d7dbe7; border-radius:10px; padding:8px 10px; background:#fff; }
textarea{ border:1px solid #d7dbe7; border-radius:10px; padding:8px 10px; background:#fff; min-height:68px; }
button{ border:1px solid #cbd5e1; background:#fff; border-radius:10px; padding:9px 12px; cursor:pointer; font-weight:800; }
button.primary{ background:var(--soft); border-color:#dbe6ff; }
button.danger{ background:#fff5f5; border-color:#f2c0c0; color:#b00020; }
table{ width:100%; border-collapse:collapse; }
th,td{ text-align:left; padding:8px; border-bottom:1px solid #f0f2f7; font-size:13px; vertical-align:top; }
th{ font-size:12px; color:#374151; border-bottom:1px solid var(--line); }
.badge{ display:inline-block; padding:3px 8px; border-radius:999px; font-size:12px; font-weight:800; border:1px solid var(--line); background:#fff; }
.badge.ok{ background:#ecfdf5; border-color:#bbf7d0; color:#065f46; }
.badge.warn{ background:#fff7ed; border-color:#fed7aa; color:#9a3412; }
.badge.bad{ background:#fff1f2; border-color:#fecdd3; color:#9f1239; }
.small{ font-size:12px; color:var(--muted); }
.hr{ height:1px; background:var(--line); margin:10px 0; }
.formGrid{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; }

/* Form validation */
.fieldError{
  color:#dc2626;
  font-size:11px;
  font-weight:600;
  margin-top:2px;
}
input:invalid,
select:invalid{
  border-color:#ef4444;
}

/* Modal */
.modalOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.35);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
  z-index:900;
}
.modal{
  width:min(760px, 100%);
  background:#fff;
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px;
  box-shadow:0 10px 40px rgba(0,0,0,0.20);
  max-height:calc(100vh - 40px);
  overflow-y:auto;
}
.modalHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.modalTitle{
  font-weight:900;
  color:var(--brand);
}
.modalActions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.pillRow{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
.pill{ padding:7px 10px; border:1px solid var(--line); border-radius:999px; background:#fff; cursor:pointer; font-weight:800; font-size:12px; }
.pill.active{ background:var(--soft); border-color:#dbe6ff; }

/* Chart wrapper */
.chartWrap{
  position:relative;
  z-index:1;
}

/* ── Table scroll wrapper ── */
.tableWrap{
  width:100%;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}
.tableWrap table{
  min-width:600px;
}

/* Responsive */
@media (max-width: 980px){
  .grid{ grid-template-columns:1fr; }
  .formGrid{ grid-template-columns:1fr 1fr; }
  .card{ overflow-x:auto; -webkit-overflow-scrolling:touch; }
  .card > table,
  .card table{ min-width:580px; }
}

@media (max-width: 820px){
  .topbar{ flex-direction:column; align-items:stretch; gap:10px; }
  .topbar .row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
  }
  .topbar .row label{ grid-column:1/-1; }
  .row{ flex-wrap:wrap; }
  .formGrid{ grid-template-columns:1fr !important; }
  .tabs{
    display:flex;
    gap:6px;
    flex-wrap:nowrap;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
    padding-bottom:4px;
    -ms-overflow-style:none;
    scrollbar-width:none;
  }
  .tabs::-webkit-scrollbar{ display:none; }
  .tab{ flex:0 0 auto; white-space:nowrap; }
}

@media (max-width: 640px){
  .container{ padding:8px; }
  .topbar{ gap:8px; }
  .topbar .row{
    grid-template-columns:1fr;
  }
  .topbar select,
  .topbar button{ width:100%; }
  .sectionHeader{
    flex-direction:column;
    align-items:stretch;
    gap:6px;
  }
  .sectionHeader .row{
    flex-wrap:wrap;
    gap:6px;
  }
  .sectionHeader select,
  .sectionHeader button{
    font-size:12px;
    padding:6px 8px;
  }
  .grid{ grid-template-columns:1fr; }
  .kpis{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
  }
  .kpi{ width:100%; min-width:auto; padding:8px; }
  .kpi .label{ font-size:11px; }
  .kpi .value{ font-size:14px; }
  .card{ padding:10px; border-radius:10px; }
  th,td{
    font-size:12px;
    padding:6px 4px;
    white-space:nowrap;
  }
  .modal{
    width:100%;
    max-height:calc(100dvh - 16px);
    overflow-y:auto;
    border-radius:10px;
    margin:8px;
  }
  .modalOverlay{ padding:0; }
  .filterRow{ flex-direction:column; align-items:stretch; }
  .chartLegend{ gap:8px; }
  .alertItem{ padding:8px 10px; }
  .chartCard{ padding:8px; }
  .h2{ font-size:13px; }
}

@media (max-width: 480px){
  body{ font-size:14px; }
  .brand{ font-size:16px; }
  .tab{ font-size:11px; padding:6px 8px; }
  .kpis{
    grid-template-columns:1fr;
  }
  .kpi .value{ font-size:14px; }
  .pillRow{ flex-direction:column; }
  .modalActions{ flex-direction:column; }
  .formGrid{ grid-template-columns:1fr !important; }
  button{ font-size:12px; padding:8px 10px; }
  select{ font-size:13px; }
}

/* ── Banco & Conciliación ── */
.bankInfoBox{
  background:#f8fafc;
  border:1px solid #e2e8f0;
  border-radius:10px;
  padding:12px 16px;
  font-size:13px;
}
.bankInfoBox ol li{
  margin-bottom:6px;
  line-height:1.5;
}
.reconciledRow{
  background:#f0fdf4;
}
.suggestionRow{
  background:#eff6ff;
}

/* Hover */
button.primary:hover{
  background:rgb(255, 95, 50);
  border-color:rgb(255, 95, 50);
  color:#fff;
}

/* Dashboard amounts */
.amountGreen{
  color:#16a34a;
  font-weight:600;
}
.amountRed{
  color:#dc2626;
  font-weight:600;
}

/* ── Charts ── */
.chartCard{
  background:#fafbff;
  border:1px solid #eef2ff;
  border-radius:12px;
  padding:12px;
}
.chartCardHeader{
  font-size:13px;
  font-weight:800;
  color:var(--brand);
  margin-bottom:8px;
}
.chartTooltip{
  background:rgba(255,255,255,0.97);
  border:1px solid #e5e7eb;
  border-radius:10px;
  padding:10px 14px;
  box-shadow:0 4px 20px rgba(0,0,0,0.12);
  font-size:13px;
}
.chartTooltipLabel{
  font-weight:700;
  color:var(--brand);
  margin-bottom:6px;
  padding-bottom:6px;
  border-bottom:1px solid #f0f2f7;
}
.chartTooltipRow{
  display:flex;
  align-items:center;
  gap:8px;
  padding:3px 0;
}
.chartTooltipDot{
  width:10px;
  height:10px;
  border-radius:50%;
  flex-shrink:0;
}
.chartTooltipName{
  color:#6b7280;
  flex:1;
}
.chartTooltipValue{
  font-weight:700;
  color:var(--text);
}
.chartLegend{
  display:flex;
  gap:10px 16px;
  flex-wrap:wrap;
  justify-content:center;
  padding:6px 4px 0;
  max-height:80px;
  overflow-y:auto;
}
.chartLegendItem{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  color:#374151;
}
.chartLegendDot{
  width:10px;
  height:10px;
  border-radius:3px;
  flex-shrink:0;
}
.chartEmpty{
  display:flex;
  align-items:center;
  justify-content:center;
  height:100%;
  color:var(--muted);
  font-size:14px;
}

/* ── Alerts ── */
.alertsList{
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-bottom:4px;
}
.alertItem{
  display:flex;
  align-items:flex-start;
  gap:10px;
  padding:10px 14px;
  border-radius:10px;
  border:1px solid;
}
.alertItem--danger{
  background:#fef2f2;
  border-color:#fecaca;
}
.alertItem--warning{
  background:#fffbeb;
  border-color:#fde68a;
}
.alertItem--info{
  background:#eff6ff;
  border-color:#bfdbfe;
}
.alertIcon{
  font-size:18px;
  line-height:1;
  flex-shrink:0;
  margin-top:1px;
}
.alertContent{
  flex:1;
  min-width:0;
}
.alertTitle{
  font-weight:700;
  font-size:13px;
  color:var(--text);
}
.alertDetail{
  font-size:12px;
  color:var(--muted);
  margin-top:2px;
}
.alertsEmpty{
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 14px;
  background:#ecfdf5;
  border:1px solid #bbf7d0;
  border-radius:10px;
  font-size:13px;
  font-weight:600;
  color:#065f46;
  margin-bottom:4px;
}

/* ── Search & Filters ── */
.searchBar{
  margin-bottom:10px;
}
.searchInput{
  width:100%;
  padding:10px 14px;
  border:1px solid #d7dbe7;
  border-radius:10px;
  font-size:13px;
  background:#fafbff;
  transition:border-color 0.15s;
}
.searchInput:focus{
  border-color:#3b82f6;
  outline:none;
  box-shadow:0 0 0 3px rgba(59,130,246,0.1);
}
.filterRow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:flex-end;
  margin-bottom:12px;
  padding-bottom:12px;
  border-bottom:1px solid var(--line);
}

/* ── Progress Bar ── */
.progressBar{
  height:18px;
  background:#e5e7eb;
  border-radius:9px;
  overflow:hidden;
}
.progressFill{
  height:100%;
  border-radius:9px;
  transition:width 0.5s ease;
}

/* ── KPI Variants ── */
.kpi--green{
  border-left:3px solid #10b981;
  background:linear-gradient(135deg, #ecfdf5 0%, #fafbff 100%);
}
.kpi--red{
  border-left:3px solid #ef4444;
  background:linear-gradient(135deg, #fef2f2 0%, #fafbff 100%);
}
.kpi--blue{
  border-left:3px solid #3b82f6;
  background:linear-gradient(135deg, #eff6ff 0%, #fafbff 100%);
}
.kpi--purple{
  border-left:3px solid #8b5cf6;
  background:linear-gradient(135deg, #f5f3ff 0%, #fafbff 100%);
}
.kpi--orange{
  border-left:3px solid #f59e0b;
  background:linear-gradient(135deg, #fffbeb 0%, #fafbff 100%);
}

/* ── Auto-suggest banner ── */
.autoSuggestBanner{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 12px;
  background:#eff6ff;
  border:1px solid #bfdbfe;
  border-radius:10px;
  font-size:12px;
  cursor:pointer;
  margin-bottom:10px;
  transition:background 0.15s;
}
.autoSuggestBanner:hover{
  background:#dbeafe;
}
.autoSuggestBanner .suggestLabel{
  flex:1;
  color:#1e40af;
  font-weight:600;
}
.autoSuggestBanner .suggestConfidence{
  color:#6b7280;
  font-size:11px;
}

/* ── OCR Status ── */
.ocrStatusBox{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:32px 16px;
  gap:12px;
}
.ocrStatusIcon{
  font-size:48px;
  line-height:1;
}

/* ── Print / PDF ── */
@media print{
  body{ background:#fff; }
  .topbar, .tabs, .tab, button, select,
  .modalOverlay, .quickBtn, .pillRow,
  .filterRow, .searchBar, .alertsList{ display:none !important; }
  .container{ max-width:100%; padding:0; }
  .card, .chartCard{ box-shadow:none; border:1px solid #ddd; break-inside:avoid; }
  .kpis{ gap:4px; }
  .kpi{ min-width:120px; padding:6px; }
  table{ font-size:11px; }
  th,td{ padding:4px 6px; }
  .grid{ grid-template-columns:1fr; }
  .printOnly{ display:block !important; }
  .noPrint{ display:none !important; }
}
